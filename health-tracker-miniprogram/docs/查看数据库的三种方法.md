# 📊 查看数据库和API统计的三种方法

## 方法1：🔍 小程序内调试（最简单）

### 操作步骤：
1. 打开健康档案页面
2. 点击红色 **🔍** 按钮
3. 查看弹出的详细统计信息
4. 可选择"测试保存"验证保存功能

### 显示信息：
- 总记录数
- 所有记录日期
- 最新/最旧记录时间
- 今天是否有数据
- API使用统计（Qwen/Gemini次数）
- 问题诊断结果

---

## 方法2：🛠️ 微信开发者工具（最直观）

### 操作步骤：
1. **打开微信开发者工具**
2. **点击工具栏的"云开发"按钮**（云朵图标☁️）
3. **选择"数据库"标签**
4. **点击"health_records"集合**

### 可以看到：
- 每条记录的完整数据
- 用户ID、创建时间
- 表单数据、AI分析结果
- API来源、分析类型
- 可以直接编辑/删除记录

### 查看云函数调用统计：
1. **切换到"云函数"标签**
2. **点击"analyze"或"generate-questions"**
3. **查看"调用日志"**
   - 调用次数和时间
   - 执行耗时
   - 成功/失败状态
   - 详细错误信息

---

## 方法3：☁️ 腾讯云控制台（最全面）

### 操作步骤：
1. **访问** [console.cloud.tencent.com](https://console.cloud.tencent.com/)
2. **登录腾讯云账号**
3. **搜索"云开发"或"TCB"**
4. **选择环境：cloud1-6gg9zh5k6f75e020**

### 详细统计包括：
- **调用统计**：每日/每月调用次数
- **性能监控**：响应时间、成功率
- **费用统计**：各项服务费用明细
- **资源用量**：存储空间、流量使用
- **错误分析**：错误类型和频率

---

## 🔍 当前问题诊断

### 根据日志分析：
- **数据库总记录数：1条**
- **记录日期：2025-08-01**（8月1日）
- **今天日期：2025-08-05**（8月5日）
- **问题：今天的数据没有保存到数据库**

### 可能原因：
1. **analyze云函数保存失败**
2. **网络问题导致保存中断**
3. **数据保存到错误位置**
4. **用户ID不匹配**

### 立即验证：
1. **点击🔍按钮查看当前状态**
2. **点击"测试保存"验证保存功能**
3. **如果测试成功，重新做一次健康诊断**
4. **查看analyze云函数的详细日志**

---

## 💡 解决建议

### 如果测试保存成功：
- 说明当前保存功能正常
- 之前的数据可能因为网络问题丢失
- 重新做健康诊断即可

### 如果测试保存失败：
- 检查analyze云函数日志
- 查看是否有错误信息
- 可能需要修复保存逻辑

### 预防措施：
- 定期备份重要数据
- 监控云函数调用状态
- 设置错误告警机制