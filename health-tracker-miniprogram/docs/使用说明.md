# 智慧健康诊断小程序 - 使用说明

## 项目简介

智慧健康诊断是一款结合中医舌诊理论与AI技术的健康评估小程序，为用户提供个性化的健康分析和建议。

## 功能特色

### 🏥 核心功能
- **中医舌诊分析**: 基于传统中医理论的舌象分析
- **AI智能问诊**: 根据用户初始信息生成个性化澄清问题
- **健康评分系统**: 综合评估用户健康状况
- **个性化建议**: 提供针对性的健康改善建议

### 📱 用户体验
- **简洁界面**: 现代化的UI设计，操作简单直观
- **智能流程**: 逐步引导用户完成评估
- **详细报告**: 全面的健康分析结果展示

## 技术架构

### 前端
- **框架**: 微信小程序原生开发
- **UI**: 自定义组件 + 响应式设计
- **页面结构**:
  - 主页：功能介绍和入口
  - 健康评估页：分步收集用户信息
  - AI问题页：智能澄清问题
  - 结果页：详细分析结果展示

### 后端
- **云开发**: 微信云开发平台
- **云函数**:
  - `generate-questions`: 生成AI澄清问题
  - `analyze`: 综合健康分析
- **数据库**: 云开发数据库存储用户记录
- **AI服务**: Google Gemini 2.5 Pro

## 使用流程

### 1. 开始评估
- 打开小程序，点击"开始健康评估"
- 进入分步评估流程

### 2. 填写基本信息
- 性别、年龄、身高、体重
- 数据验证确保信息准确性

### 3. 舌诊问答
- 回答4个基础舌诊问题：
  1. 口干舌燥频率
  2. 舌头颜色
  3. 舌苔厚度
  4. 睡眠质量

### 4. 舌象拍摄（可选）
- 拍摄舌头照片以提高分析准确性
- 提供拍摄指导和技巧

### 5. AI智能问诊
- 系统根据初始信息生成2-3个针对性问题
- 用户回答所有澄清问题

### 6. 获取分析结果
- 健康评分（60-100分）
- BMI计算和状态评估
- 中医体质分析
- 舌诊详细分析
- 个性化健康建议
- 季节性养生建议
- 后续观察建议

## 部署要求

### 环境配置
1. **微信开发者工具**: 最新版本
2. **云开发环境**: 已创建并配置
3. **Google API Key**: 配置Gemini API访问

### 云函数部署
已部署的云函数：
- `analyze`: 健康分析主函数
- `generate-questions`: AI问题生成函数

### 数据库配置
- 集合名：`health_records`
- 权限：用户仅可读写自己的记录

## 数据安全

### 隐私保护
- 用户数据仅用于健康分析
- 严格的访问权限控制
- 符合微信平台安全规范

### 免责声明
本应用提供的健康分析和建议仅供参考，不能替代专业医疗诊断。如有严重健康问题，请及时就医。

## 技术支持

### 开发环境
- 微信小程序基础库: >= 2.2.3
- 云开发环境: 已配置
- Node.js版本: 18.x（云函数运行时）

### 依赖包
云函数依赖：
- `wx-server-sdk`: 微信云开发SDK
- `@google/generative-ai`: Google AI SDK

## 更新日志

### v1.0.0 (当前版本)
- ✅ 完成基础健康评估功能
- ✅ 集成AI智能问诊
- ✅ 实现舌诊分析系统
- ✅ 提供详细健康报告
- ✅ 优化用户体验和界面设计

## 后续规划

### 功能扩展
- [ ] 历史记录查看
- [ ] 健康趋势分析
- [ ] 用户数据导出
- [ ] 更多中医诊断维度
- [ ] 社区分享功能

### 技术优化
- [ ] 性能优化
- [ ] 缓存机制
- [ ] 离线模式支持
- [ ] 多语言支持

---

*最后更新：2024年*