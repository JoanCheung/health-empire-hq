<view class="profile-container">
  <!-- Header -->
  <view class="header-section">
    <view class="header-title">{{isEditing ? '编辑个人资料' : '完善个人资料'}}</view>
    <view class="header-desc">详细的个人信息有助于提供更精准的健康分析</view>
  </view>

  <!-- Profile Form -->
  <view class="form-section">
    <!-- 基本信息 -->
    <view class="form-group">
      <view class="group-title">基本信息</view>
      
      <view class="form-item">
        <text class="item-label required">姓名</text>
        <input 
          class="item-input" 
          placeholder="请输入真实姓名"
          value="{{profileForm.name}}"
          bindinput="handleInput"
          data-field="name"
          maxlength="20"
        />
      </view>

      <view class="form-item">
        <text class="item-label required">年龄</text>
        <input 
          class="item-input" 
          placeholder="请输入年龄"
          type="number"
          value="{{profileForm.age}}"
          bindinput="handleInput"
          data-field="age"
        />
      </view>

      <view class="form-item">
        <text class="item-label required">性别</text>
        <radio-group class="gender-group" bindchange="handleGenderChange">
          <label class="gender-item">
            <radio value="male" checked="{{profileForm.gender === 'male'}}" />
            <text>男</text>
          </label>
          <label class="gender-item">
            <radio value="female" checked="{{profileForm.gender === 'female'}}" />
            <text>女</text>
          </label>
        </radio-group>
      </view>

      <view class="form-row">
        <view class="form-item half">
          <text class="item-label required">身高 (cm)</text>
          <input 
            class="item-input" 
            placeholder="身高"
            type="digit"
            value="{{profileForm.height}}"
            bindinput="handleInput"
            data-field="height"
          />
        </view>
        <view class="form-item half">
          <text class="item-label required">体重 (kg)</text>
          <input 
            class="item-input" 
            placeholder="体重"
            type="digit"
            value="{{profileForm.weight}}"
            bindinput="handleInput"
            data-field="weight"
          />
        </view>
      </view>
    </view>

    <!-- 联系信息 -->
    <view class="form-group">
      <view class="group-title">联系信息</view>
      
      <view class="form-item">
        <text class="item-label">手机号</text>
        <input 
          class="item-input" 
          placeholder="请输入手机号"
          type="number"
          value="{{profileForm.phone}}"
          bindinput="handleInput"
          data-field="phone"
          maxlength="11"
        />
      </view>

      <view class="form-item">
        <text class="item-label">职业</text>
        <input 
          class="item-input" 
          placeholder="请输入职业"
          value="{{profileForm.occupation}}"
          bindinput="handleInput"
          data-field="occupation"
        />
      </view>
    </view>

    <!-- 健康信息 -->
    <view class="form-group">
      <view class="group-title">健康信息</view>
      
      <view class="form-item">
        <text class="item-label">既往病史</text>
        <textarea 
          class="item-textarea" 
          placeholder="请简述既往重要病史（如高血压、糖尿病等）"
          value="{{profileForm.medicalHistory}}"
          bindinput="handleInput"
          data-field="medicalHistory"
          maxlength="200"
        />
      </view>

      <view class="form-item">
        <text class="item-label">过敏史</text>
        <textarea 
          class="item-textarea" 
          placeholder="请描述过敏物质（如药物、食物等）"
          value="{{profileForm.allergies}}"
          bindinput="handleInput"
          data-field="allergies"
          maxlength="200"
        />
      </view>

      <view class="form-item">
        <text class="item-label">当前用药</text>
        <textarea 
          class="item-textarea" 
          placeholder="请列出正在服用的药物"
          value="{{profileForm.currentMedications}}"
          bindinput="handleInput"
          data-field="currentMedications"
          maxlength="200"
        />
      </view>

      <view class="form-item">
        <text class="item-label">健康目标</text>
        <textarea 
          class="item-textarea" 
          placeholder="描述您的健康目标和期望改善的问题"
          value="{{profileForm.healthGoals}}"
          bindinput="handleInput"
          data-field="healthGoals"
          maxlength="200"
        />
      </view>
    </view>

    <!-- 紧急联系人 -->
    <view class="form-group">
      <view class="group-title">紧急联系人</view>
      
      <view class="form-item">
        <text class="item-label">联系人姓名</text>
        <input 
          class="item-input" 
          placeholder="紧急联系人姓名"
          value="{{profileForm.emergencyContact}}"
          bindinput="handleInput"
          data-field="emergencyContact"
        />
      </view>

      <view class="form-item">
        <text class="item-label">联系人电话</text>
        <input 
          class="item-input" 
          placeholder="紧急联系人电话"
          type="number"
          value="{{profileForm.emergencyPhone}}"
          bindinput="handleInput"
          data-field="emergencyPhone"
          maxlength="11"
        />
      </view>
    </view>
  </view>

  <!-- Action Buttons -->
  <view class="action-section">
    <button 
      class="save-btn" 
      bindtap="saveProfile" 
      disabled="{{loading}}"
      loading="{{loading}}"
    >
      保存资料
    </button>
    
    <view wx:if="{{!isEditing}}" class="skip-action">
      <text class="skip-btn" bindtap="skipProfile">暂时跳过</text>
    </view>
  </view>

  <!-- Privacy Notice -->
  <view class="privacy-notice">
    <text class="privacy-text">您的个人信息将被安全保护，仅用于健康分析服务</text>
  </view>
</view>