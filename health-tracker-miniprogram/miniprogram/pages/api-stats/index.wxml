<view class="container">
  <view class="header">
    <view class="title">ğŸ¤– AIåˆ†æç»Ÿè®¡</view>
    <view class="subtitle">æŸ¥çœ‹ä¸åŒAIæ¨¡å‹çš„ä½¿ç”¨æƒ…å†µ</view>
  </view>

  <view wx:if="{{loading}}" class="loading-section">
    <view class="loading-icon">â³</view>
    <text>åŠ è½½ç»Ÿè®¡æ•°æ®ä¸­...</text>
  </view>

  <view wx:else>
    <!-- æ€»ä½“ç»Ÿè®¡ -->
    <view class="stats-overview">
      <view class="stat-card">
        <view class="stat-number">{{stats.total}}</view>
        <view class="stat-label">æ€»åˆ†ææ¬¡æ•°</view>
      </view>
      
      <view class="stat-card qwen">
        <view class="stat-number">{{stats.qwenCount}}</view>
        <view class="stat-label">Qwenåˆ†æ</view>
      </view>
      
      <view class="stat-card gemini">
        <view class="stat-number">{{stats.geminiCount}}</view>
        <view class="stat-label">Geminiåˆ†æ</view>
      </view>
      
      <view class="stat-card offline">
        <view class="stat-number">{{stats.offlineCount}}</view>
        <view class="stat-label">ç¦»çº¿åˆ†æ</view>
      </view>
    </view>

    <!-- ç«é€Ÿèƒœç‡ -->
    <view class="win-rate-section" wx:if="{{stats.qwenCount > 0 || stats.geminiCount > 0}}">
      <view class="section-title">ğŸ APIç«é€Ÿèƒœç‡</view>
      <view class="win-rate-card">
        <view class="win-rate-bar">
          <view class="qwen-bar" style="width: {{stats.qwenWinRate}}%"></view>
          <view class="gemini-bar" style="width: {{100 - stats.qwenWinRate}}%"></view>
        </view>
        <view class="win-rate-labels">
          <view class="qwen-label">Qwen {{stats.qwenWinRate}}%</view>
          <view class="gemini-label">Gemini {{100 - stats.qwenWinRate}}%</view>
        </view>
      </view>
    </view>

    <!-- æœ€è¿‘åˆ†æè®°å½• -->
    <view class="recent-section" wx:if="{{stats.recentAnalysis.length > 0}}">
      <view class="section-title">ğŸ“‹ æœ€è¿‘åˆ†æè®°å½•</view>
      <view class="recent-list">
        <view class="recent-item" wx:for="{{stats.recentAnalysis}}" wx:key="index">
          <view class="recent-date">{{item.date}}</view>
          <view class="recent-info">
            <view class="api-tag {{item.apiSource.toLowerCase()}}">
              {{item.apiSource}}
              <text wx:if="{{item.raceWinner}}" class="winner-badge">ğŸ†</text>
            </view>
            <view class="health-score">è¯„åˆ†: {{item.healthScore}}</view>
          </view>
        </view>
      </view>
    </view>

    <!-- æ“ä½œæŒ‰é’® -->
    <view class="action-buttons">
      <button class="refresh-btn" bindtap="refreshStats">åˆ·æ–°ç»Ÿè®¡</button>
      <button class="back-btn" bindtap="goBack">è¿”å›</button>
    </view>
  </view>
</view>