<view class="container">
  <!-- å¥åº·è¯„åˆ†å¡ç‰‡ -->
  <view class="score-card">
    <view class="score-circle">
      <view class="score-number">{{result.healthScore || 0}}</view>
      <view class="score-total">/100</view>
    </view>
    <view class="score-text">å¥åº·è¯„åˆ†</view>
    <view class="bmi-info">
      <text>BMI: {{result.bmi}} ({{result.bmiStatus}})</text>
    </view>
    <!-- ç¦»çº¿åˆ†ææ ‡è¯† -->
    <view class="offline-badge" wx:if="{{result.isOfflineAnalysis}}">
      <text>ğŸ“± ç¦»çº¿åˆ†æ</text>
    </view>
    
    <!-- APIæ¥æºä¿¡æ¯ -->
    <view class="api-badge" wx:if="{{result.apiSource}}">
      <text>ğŸ¤– ç”± {{result.apiSource}} åˆ†æ</text>
    </view>
  </view>

  <!-- æ•´ä½“è¯„ä¼° -->
  <view class="section-card">
    <view class="section-title">
      <view class="icon">ğŸ“‹</view>
      <text>æ•´ä½“è¯„ä¼°</text>
    </view>
    <view class="section-content">
      <text class="assessment-text">{{result.overallAssessment}}</text>
    </view>
  </view>

  <!-- èˆŒè¯Šåˆ†æ -->
  <view class="section-card" wx:if="{{result.tongueAnalysis}}">
    <view class="section-title">
      <view class="icon">ğŸ‘…</view>
      <text>èˆŒè¯Šåˆ†æ</text>
    </view>
    <view class="section-content">
      <view class="tongue-item">
        <text class="tongue-label">èˆŒè‰²ï¼š</text>
        <text class="tongue-value">{{result.tongueAnalysis.color}}</text>
      </view>
      <view class="tongue-item">
        <text class="tongue-label">èˆŒè‹”ï¼š</text>
        <text class="tongue-value">{{result.tongueAnalysis.coating}}</text>
      </view>
      <view class="tongue-item">
        <text class="tongue-label">ç»¼åˆï¼š</text>
        <text class="tongue-value">{{result.tongueAnalysis.overall}}</text>
      </view>
    </view>
  </view>

  <!-- é£é™©å› ç´  -->
  <view class="section-card" wx:if="{{result.riskFactors && result.riskFactors.length > 0}}">
    <view class="section-title">
      <view class="icon">âš ï¸</view>
      <text>æ³¨æ„äº‹é¡¹</text>
    </view>
    <view class="section-content">
      <view class="risk-item" wx:for="{{result.riskFactors}}" wx:key="*this">
        <view class="risk-dot"></view>
        <text>{{item}}</text>
      </view>
    </view>
  </view>

  <!-- å¥åº·å»ºè®® -->
  <view class="section-card" wx:if="{{result.suggestions && result.suggestions.length > 0}}">
    <view class="section-title">
      <view class="icon">ğŸ’¡</view>
      <text>å¥åº·å»ºè®®</text>
    </view>
    <view class="section-content">
      <view class="suggestion-item" wx:for="{{result.suggestions}}" wx:key="*this">
        <view class="suggestion-number">{{index + 1}}</view>
        <text class="suggestion-text">{{item}}</text>
      </view>
    </view>
  </view>

  <!-- ä½“è´¨åˆ†æ -->
  <view class="section-card" wx:if="{{result.tcmConstitution}}">
    <view class="section-title">
      <view class="icon">ğŸº</view>
      <text>ä¸­åŒ»ä½“è´¨</text>
    </view>
    <view class="section-content">
      <text class="constitution-text">{{result.tcmConstitution}}</text>
    </view>
  </view>

  <!-- å­£èŠ‚æ€§å»ºè®® -->
  <view class="section-card" wx:if="{{result.seasonalAdvice}}">
    <view class="section-title">
      <view class="icon">ğŸŒ±</view>
      <text>å­£èŠ‚å…»ç”Ÿ</text>
    </view>
    <view class="section-content">
      <text class="seasonal-text">{{result.seasonalAdvice}}</text>
    </view>
  </view>

  <!-- åç»­å»ºè®® -->
  <view class="section-card" wx:if="{{result.followUpRecommendations && result.followUpRecommendations.length > 0}}">
    <view class="section-title">
      <view class="icon">ğŸ“…</view>
      <text>åç»­å»ºè®®</text>
    </view>
    <view class="section-content">
      <view class="followup-item" wx:for="{{result.followUpRecommendations}}" wx:key="*this">
        <view class="followup-dot"></view>
        <text>{{item}}</text>
      </view>
    </view>
  </view>

  <!-- å…è´£å£°æ˜ -->
  <view class="disclaimer-card">
    <view class="disclaimer-title">å…è´£å£°æ˜</view>
    <text class="disclaimer-text">{{result.disclaimer || 'æ­¤åˆ†æä»…ä¾›å‚è€ƒï¼Œå¦‚æœ‰ä¸¥é‡ä¸é€‚è¯·åŠæ—¶å°±åŒ»'}}</text>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="action-buttons">
    <button class="share-btn" bindtap="shareResult">åˆ†äº«ç»“æœ</button>
    <button class="new-assessment-btn" bindtap="newAssessment">é‡æ–°è¯„ä¼°</button>
  </view>

  <!-- APIç»Ÿè®¡å…¥å£ -->
  <view class="api-stats-section" wx:if="{{result.apiSource}}">
    <button class="api-stats-btn" bindtap="viewAPIStats">
      ğŸ“Š æŸ¥çœ‹AIåˆ†æç»Ÿè®¡ (æœ¬æ¬¡ç”±{{result.apiSource}}åˆ†æ)
    </button>
  </view>

  <!-- éšè—çš„Canvasç”¨äºæˆªå›¾ -->
    <!-- å¯¼èˆªæŒ‰é’® -->
  <view class="navigation-buttons">
    <button class="nav-btn primary" bindtap="goToHome">è¿”å›é¦–é¡µ</button>
    <button class="nav-btn secondary" bindtap="goToProfile">æˆ‘çš„å¥åº·æ¡£æ¡ˆ</button>
  </view>

  <canvas canvas-id="result-canvas" class="screenshot-canvas"></canvas>
</view>