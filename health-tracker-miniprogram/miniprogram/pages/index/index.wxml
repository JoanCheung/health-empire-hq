<view class="homepage-container">
  <!-- Loading State -->
  <view class="loading-overlay" wx:if="{{loading}}">
    <view class="loading-content">
      <view class="loading-spinner"></view>
      <text class="loading-text">正在加载用户信息...</text>
    </view>
  </view>

  <!-- Header Section -->
  <view class="header-section">
    <view class="main-title">智慧健康诊断</view>
    <view class="main-subtitle">基于AI技术的中医舌诊健康评估系统</view>
    
    <!-- User Status Section -->
    <view class="user-status-section" wx:if="{{!loading}}">
      <view class="user-status-card" wx:if="{{isLoggedIn}}">
        <view class="user-avatar" wx:if="{{userInfo.avatarUrl}}">
          <image src="{{userInfo.avatarUrl}}" class="avatar-img" />
        </view>
        <view class="user-info">
          <text class="user-name">{{userInfo.nickName || '用户'}}</text>
          <text class="user-profile-status" wx:if="{{userProfile}}">个人资料已完善</text>
          <text class="user-profile-status incomplete" wx:else>个人资料待完善</text>
        </view>
        <view class="complete-profile-btn" wx:if="{{!userProfile}}" bindtap="goToCompleteProfile">
          完善资料
        </view>
      </view>
      
      <view class="login-prompt" wx:if="{{!isLoggedIn}}">
        <view class="login-card">
          <view class="login-icon">👤</view>
          <text class="login-title">欢迎使用智慧健康诊断</text>
          <text class="login-desc">登录后可保存健康记录，享受个性化服务</text>
          <button class="login-btn" bindtap="handleUserLogin">
            微信授权登录
          </button>
        </view>
      </view>
    </view>
  </view>

  <!-- Main Action Cards -->
  <view class="action-cards-section">
    <view class="card action-card" bindtap="startDiagnosis" hover-class="card-hover">
      <view class="card-icon">🔍</view>
      <view class="card-content">
        <view class="card-title">开始诊断</view>
        <view class="card-description">智能问诊配合舌诊分析</view>
      </view>
      <view class="card-arrow">›</view>
    </view>

    <view class="card action-card" bindtap="goToProfile" hover-class="card-hover">
      <view class="card-icon">📋</view>
      <view class="card-content">
        <view class="card-title">我的健康档案</view>
        <view class="card-description">查看历史记录和健康报告</view>
      </view>
      <view class="card-arrow">›</view>
    </view>
  </view>

  <!-- Footer Disclaimer -->
  <view class="footer-section">
    <text class="disclaimer">本应用仅供健康参考，不能替代专业医疗诊断</text>
  </view>
</view>