<!-- network-test/index.wxml -->
<view class="container">
  <view class="header">
    <text class="title">ğŸ” ç½‘ç»œè¿æ¥è¯Šæ–­</text>
    <text class="subtitle">è¯Šæ–­AIåŠŸèƒ½ç½‘ç»œè¿æ¥é—®é¢˜</text>
  </view>

  <view class="test-section">
    <button 
      class="test-btn {{testing ? 'disabled' : ''}}" 
      bindtap="runNetworkTest"
      disabled="{{testing}}"
    >
      {{testing ? 'è¯Šæ–­ä¸­...' : 'å¼€å§‹ç½‘ç»œè¯Šæ–­'}}
    </button>
  </view>

  <!-- é”™è¯¯ä¿¡æ¯ -->
  <view wx:if="{{error}}" class="error-section">
    <view class="error-title">âŒ è¯Šæ–­å¤±è´¥</view>
    <view class="error-content">{{error}}</view>
  </view>

  <!-- è¯Šæ–­ç»“æœ -->
  <view wx:if="{{results}}" class="results-section">
    <view class="results-header">
      <text class="results-title">ğŸ“Š è¯Šæ–­ç»“æœ</text>
      <button class="copy-btn" bindtap="copyResults">å¤åˆ¶ç»“æœ</button>
    </view>
    
    <view class="summary">
      <text>æ€»æµ‹è¯•: {{summary.totalTests}}</text>
      <text>æˆåŠŸ: {{summary.successCount}}</text>
      <text>å¤±è´¥: {{summary.failedCount}}</text>
    </view>

    <view class="test-results">
      <view 
        wx:for="{{results.tests}}" 
        wx:key="name"
        class="test-item {{item.status.toLowerCase()}}"
      >
        <view class="test-header">
          <text class="test-name">{{item.name}}</text>
          <text class="test-status">{{item.status}}</text>
        </view>
        
        <view wx:if="{{item.details}}" class="test-details">
          <text>{{item.details}}</text>
        </view>
        
        <view wx:if="{{item.error}}" class="test-error">
          <text>é”™è¯¯: {{item.error}}</text>
        </view>
      </view>
    </view>
  </view>
</view>